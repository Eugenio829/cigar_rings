{% load static %}

<!-- Overlay para oscurecer el fondo cuando el sidebar est√° abierto -->
<div class="overlay" onclick="toggleSidebar()"></div>

<!-- Encabezado principal de la aplicaci√≥n -->
<header class="header">
    <div class="hamburger" onclick="toggleSidebar()">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <h1 class="header-title">Sistema de Gesti√≥n Empresarial</h1>
    <div class="header-right">
        {% if user.is_authenticated %}
            <div class="user-info">
                <div class="user-avatar">{{ user.username.0|upper }}</div>
                <span class="user-name">{{ user.username }}</span>
            </div>
            <button class="refresh-btn" onclick="refreshPage()">
                <span class="refresh-icon">‚Üª</span>
                <span>Actualizar</span>
            </button>
            <a href="{% url 'logout' %}" class="logout-btn">
                <span>‚èª</span>
                <span>Cerrar Sesi√≥n</span>
            </a>
        {% else %}
            <a href="{% url 'login' %}" class="logout-btn">
                <span></span>
                <span>Iniciar Sesi√≥n</span>
            </a>
        {% endif %}
    </div>
</header>

<!-- Barra lateral de navegaci√≥n -->
<nav class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <div class="logo">
                <img src="{% static 'img/logo/Imagen1.png' %}" alt="Cigar Rings Logo">
            </div>
            CIGAR RINGS
            <div style="font-size: 12px; font-weight: 400; opacity: 0.8; margin-top: 5px;">Sistema Integral</div>
        </div>
    </div>
    <div class="sidebar-nav">
        {% with request.resolver_match.url_name as url_name %}
        <!-- Secci√≥n de panel principal -->
        <div class="nav-section">
            <div class="nav-section-title">Panel Principal</div>
            <a href="{% url 'core:dashboard' %}" class="nav-item {% if url_name == 'dashboard' %}active{% endif %}">
                <span class="nav-item-icon">üìä</span>
                <span>Dashboard Ejecutivo</span>
            </a>
        </div>
        
        <!-- Secci√≥n de operaciones con submen√∫s -->
        <div class="nav-section">
            <div class="nav-section-title">Operaciones</div>
            <!-- Submen√∫ de Gesti√≥n de Grabados -->
            {% url 'grabado_consulta' as grabado_consulta_url %}
            <div class="nav-item-with-submenu">
                <a href="#" class="nav-item {% if url_name == 'grabado_consulta' %}active{% endif %}" onclick="toggleSubmenu(this); return false;">
                    <span class="nav-item-icon">üé®</span>
                    <span>Gesti√≥n de Grabados</span>
                    <span class="submenu-arrow">‚ñº</span>
                </a>
                <div class="submenu">
                    <a href="#" class="submenu-item">Estad√≠sticas </a>
                    <a href="{{ grabado_consulta_url }}" class="submenu-item {% if url_name == 'grabado_consulta' %}active{% endif %}">Tabla de Consultas</a>
                    <a href="#" class="submenu-item">Fabricaci√≥n</a>
                    <a href="#" class="submenu-item">Inventario</a>
                </div>
            </div>
            <!-- Submen√∫ de Control de Tintas -->
            <div class="nav-item-with-submenu">
                <a href="#" class="nav-item" onclick="toggleSubmenu(this); return false;">
                    <span class="nav-item-icon">üñåÔ∏è</span>
                    <span>Control de Tintas</span>
                    <span class="submenu-arrow">‚ñº</span>
                </a>
                <div class="submenu">
                    <a href="#" class="submenu-item">Inventario</a>
                </div>
            </div>
            <!-- Submen√∫ de Almacen -->
            {% url 'almacen' as almacen_url %}
            <div class="nav-item-with-submenu">
                <a href="{{ almacen_url }}" class="nav-item {% if url_name == 'almacen' %}active{% endif %}">
                    <span class="nav-item-icon">üì¶</span>
                    <span>Almacen</span>
                </a>
            </div>
        </div>
        
        <!-- Secci√≥n de administraci√≥n -->
        <div class="nav-section">
            <div class="nav-section-title">Administraci√≥n</div>
            <a href="#" class="nav-item">
                <span class="nav-item-icon">‚öôÔ∏è</span>
                <span>Configuraci√≥n</span>
            </a>
            <a href="#" class="nav-item">
                <span class="nav-item-icon">üë•</span>
                <span>Usuarios</span>
            </a>
            <a href="#" class="nav-item">
                <span class="nav-item-icon">üìã</span>
                <span>Reportes</span>
            </a>
        </div>
        {% endwith %}
    </div>
</nav>